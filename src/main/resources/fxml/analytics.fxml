<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.storeapp.ui.AnalyticsController" style="-fx-background-color: #f8f9fa;">
    <top>
        <VBox style="-fx-background-color: linear-gradient(to right, #667eea, #764ba2); -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 10, 0, 0, 3);">
            <HBox spacing="15.0" alignment="CENTER_LEFT">
                <padding>
                    <Insets bottom="20.0" left="30.0" right="30.0" top="20.0"/>
                </padding>
                <Button fx:id="backButton" text="[ BACK ]" onAction="#handleBack" style="-fx-background-color: rgba(255,255,255,0.95); -fx-text-fill: #667eea; -fx-font-weight: bold; -fx-font-family: 'Consolas', 'Courier New', monospace; -fx-background-radius: 8px; -fx-padding: 10px 20px;"/>
                <Label text="[ ANALYTICS DASHBOARD ]" style="-fx-font-size: 24px; -fx-text-fill: white; -fx-font-weight: bold; -fx-font-family: 'Consolas', 'Courier New', monospace;"/>
            </HBox>
        </VBox>
    </top>
    
    <center>
        <ScrollPane fitToWidth="true" fitToHeight="true" style="-fx-background-color: transparent; -fx-background: transparent;">
            <VBox spacing="25.0">
                <padding>
                    <Insets bottom="30.0" left="30.0" right="30.0" top="30.0"/>
                </padding>
                
                <!-- Summary Statistics Cards -->
                <GridPane hgap="20.0" vgap="20.0" alignment="CENTER">
                    <columnConstraints>
                        <ColumnConstraints percentWidth="25.0"/>
                        <ColumnConstraints percentWidth="25.0"/>
                        <ColumnConstraints percentWidth="25.0"/>
                        <ColumnConstraints percentWidth="25.0"/>
                    </columnConstraints>
                    
                    <VBox alignment="CENTER" spacing="12.0" style="-fx-background-color: #667eea; -fx-background-radius: 15px; -fx-padding: 25px; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 12, 0, 0, 3);" GridPane.columnIndex="0">
                        <Label text="TOTAL SALES" style="-fx-font-size: 14px; -fx-font-weight: 700; -fx-text-fill: white; -fx-font-family: 'Consolas', 'Courier New', monospace;"/>
                        <Label fx:id="totalSalesLabel" text="0" style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: white; -fx-font-family: 'Consolas', 'Courier New', monospace;"/>
                        <Label text="ALL TIME" style="-fx-font-size: 12px; -fx-text-fill: #E8E8F0; -fx-font-family: 'Consolas', 'Courier New', monospace;"/>
                    </VBox>
                    
                    <VBox alignment="CENTER" spacing="12.0" style="-fx-background-color: #e53e3e; -fx-background-radius: 15px; -fx-padding: 25px; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 12, 0, 0, 3);" GridPane.columnIndex="1">
                        <Label text="TOTAL REVENUE" style="-fx-font-size: 14px; -fx-font-weight: 700; -fx-text-fill: white; -fx-font-family: 'Consolas', 'Courier New', monospace;"/>
                        <Label fx:id="totalRevenueLabel" text="0.00" style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: white; -fx-font-family: 'Consolas', 'Courier New', monospace;"/>
                        <Label text="ALL TIME" style="-fx-font-size: 12px; -fx-text-fill: #FFE8E8; -fx-font-family: 'Consolas', 'Courier New', monospace;"/>
                    </VBox>
                    
                    <VBox alignment="CENTER" spacing="12.0" style="-fx-background-color: #3182ce; -fx-background-radius: 15px; -fx-padding: 25px; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 12, 0, 0, 3);" GridPane.columnIndex="2">
                        <Label text="TODAY'S SALES" style="-fx-font-size: 14px; -fx-font-weight: 700; -fx-text-fill: white; -fx-font-family: 'Consolas', 'Courier New', monospace;"/>
                        <Label fx:id="todaySalesLabel" text="0" style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: white; -fx-font-family: 'Consolas', 'Courier New', monospace;"/>
                        <Label text="LAST 24 HOURS" style="-fx-font-size: 12px; -fx-text-fill: #E0F2FE; -fx-font-family: 'Consolas', 'Courier New', monospace;"/>
                    </VBox>
                    
                    <VBox alignment="CENTER" spacing="12.0" style="-fx-background-color: #38a169; -fx-background-radius: 15px; -fx-padding: 25px; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 12, 0, 0, 3);" GridPane.columnIndex="3">
                        <Label text="TODAY'S REVENUE" style="-fx-font-size: 14px; -fx-font-weight: 700; -fx-text-fill: white; -fx-font-family: 'Consolas', 'Courier New', monospace;"/>
                        <Label fx:id="todayRevenueLabel" text="0.00" style="-fx-font-size: 36px; -fx-font-weight: bold; -fx-text-fill: white; -fx-font-family: 'Consolas', 'Courier New', monospace;"/>
                        <Label text="LAST 24 HOURS" style="-fx-font-size: 12px; -fx-text-fill: #E6FFED; -fx-font-family: 'Consolas', 'Courier New', monospace;"/>
                    </VBox>
                </GridPane>
                
                <!-- Charts Section -->
                <HBox spacing="25.0" alignment="TOP_CENTER">
                    <!-- Bar Chart: Units Sold by Product -->
                    <VBox spacing="15.0" style="-fx-background-color: white; -fx-background-radius: 15px; -fx-padding: 25px; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 12, 0, 0, 3);">
                        <Label text="[ TOP PRODUCTS BY UNITS SOLD ]" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #2d3748; -fx-font-family: 'Consolas', 'Courier New', monospace;"/>
                        <BarChart fx:id="unitsBarChart" prefWidth="500.0" prefHeight="350.0" legendVisible="false" animated="true" barGap="3" categoryGap="15">
                            <xAxis>
                                <CategoryAxis label="Product Name" side="BOTTOM" fx:id="xAxis" tickLabelRotation="45" tickLabelFill="#2d3748"/>
                            </xAxis>
                            <yAxis>
                                <NumberAxis label="Units Sold" side="LEFT" fx:id="yAxis" tickLabelFill="#2d3748"/>
                            </yAxis>
                        </BarChart>
                    </VBox>
                    
                    <!-- Pie Chart: Products by Category -->
                    <VBox spacing="15.0" style="-fx-background-color: white; -fx-background-radius: 15px; -fx-padding: 25px; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 12, 0, 0, 3);">
                        <Label text="[ PRODUCT DISTRIBUTION BY CATEGORY ]" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #2d3748; -fx-font-family: 'Consolas', 'Courier New', monospace;"/>
                        <PieChart fx:id="categoryPieChart" prefWidth="700.0" prefHeight="450.0" legendVisible="false" animated="true" labelsVisible="true"/>
                    </VBox>
                </HBox>
            </VBox>
        </ScrollPane>
    </center>
</BorderPane>
